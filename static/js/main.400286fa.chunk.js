(this["webpackJsonpreact-hive-flow-example"]=this["webpackJsonpreact-hive-flow-example"]||[]).push([[0],{48:function(e,t,n){},69:function(e,t,n){e.exports=n(87)},85:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);n(48);var a=n(0),o=n.n(a),r=n(6),l=n.n(r),d=n(13),i=n(41),c=n(25),u=n(51),s=n(117),m=n(57),f=n(132),p=n(133),E=n(123),_=n(124),v=n(125),b=n(130),N=n(122),g=n(88),y=n(126),k=n(127),C=n(128),h=n(129),O=n(52),x=n.n(O),S=o.a.createContext({nodes:[],links:[]}),I=Object(u.withContext)(S,"editor"),T="_styles-module__dropdownMenu___hH1v",j="_styles-module__dropdownMenuItem__28d_0",P="_styles-module__controlHeader__9TgmR";var w=I((function(e){var t=o.a.useState(null),n=Object(d.a)(t,2),a=n[0],r=n[1],l=o.a.useState(null),i=Object(d.a)(l,2),c=i[0],u=i[1],f=[{name:"View",menu:o.a.createElement("div",null)},{name:"Select",menu:o.a.createElement("div",null)},{name:"Add",menu:[{label:"Base",type:"baseNode"},{label:"Product",type:"productNode"},{label:"Picker",type:"pickerNode"},{label:"Collector",type:"collectorNode"}].concat((e.editor.nodeTypes||[]).map((function(e){return{label:e.type,type:e.type}}))).map((function(t){return o.a.createElement(s.a,{className:j,onClick:function(){return e.editor.addNode(t.type,{x:300,y:300})}},t.label)}))},{name:"Object",menu:o.a.createElement("div",null)}];return o.a.createElement("div",{className:P},f.map((function(e){return o.a.createElement("div",{onClick:function(t){r(t.currentTarget),u(e)}},e.name)})),o.a.createElement(m.a,{className:T,keepMounted:!0,anchorEl:a,open:null!=c,onClose:function(){u(null)}},c&&c.menu))})),L="_styles-module__controlModal__3qLbB";var M=I((function(e){return o.a.createElement(f.a,{fullWidth:!0,open:e.open,onClose:e.onClose},o.a.createElement(p.a,null,e.selected&&e.selected.data.label),o.a.createElement(E.a,null,o.a.createElement("div",{className:L},e.children(e.selected))),o.a.createElement(_.a,null,o.a.createElement(v.a,{onClick:e.onClose},"Cancel"),o.a.createElement(v.a,{color:"primary",variant:"contained"},"Save")))})),D="_styles-module__nodeTeam__1LiKH",H="_styles-module__nodeWrapper__3RT75",B="_styles-module__nodeWrapperInner__2SJDu",F="_styles-module__nodeMenu__3mIbw";var W=I((function(e){var t=[{icon:o.a.createElement(y.a,null),action:function(){var t=e.editor.addNode("baseNode",{x:e.xPos,y:e.yPos+100});e.editor.addLink(e.id,t.id)}},{icon:e.data&&"COMPLETE"!=e.data.status?o.a.createElement(k.a,null):o.a.createElement(C.a,null),action:function(){e.editor.updateNode(e.id,(function(t){var n=Object.assign({},t);return n.data.status="COMPLETE"!=e.data.status?"COMPLETE":"UNFINISHED",n}))}},{icon:o.a.createElement(h.a,null),action:function(){e.editor.exploreNode(e.id)}}],n=e.editor.nodes.filter((function(t){return t.id==e.id}));return o.a.createElement("div",{className:H},o.a.createElement(c.c,{type:"target",position:"top",style:{background:"#555"}}),o.a.createElement("div",{className:B},e.children,e.selected&&o.a.createElement("div",{className:F},t.map((function(e){return o.a.createElement(x.a,{onTap:e.action,component:"div"},e.icon)})))),o.a.createElement("div",{className:D},n&&n.length>0&&n[0].members&&n[0].members.map((function(e){return o.a.createElement("img",{src:"https://avatars.dicebear.com/api/avataaars/".concat(e,".svg")})}))),o.a.createElement(c.c,{type:"source",position:"bottom"}))})),J="_styles-module__base-node__info__3UHjB",R=I((function(e){return o.a.createElement(b.a,{fullWidth:!0,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.label=t.target.value,e}))},value:e.node.data.label,label:"Description",rows:6,multiline:!0})}));var U=I((function(e){var t=o.a.useState(!1),n=Object(d.a)(t,2),a=(n[0],n[1],(e.editor&&e.editor.nodes||[]).filter((function(t){return t.id==e.id})));return o.a.createElement(W,e,o.a.createElement("textarea",{key:e.id+"textarea",rows:4,placeholder:"Node description",value:a.length>0?a[0].data.label:"",onChange:function(t){e.editor.updateNode(e.id,(function(e){return e.data.label=t.target.value,e}))}}),o.a.createElement("div",{className:J}))})),$={__proto__:null,type:"baseNode",modal:R,node:U},G="_styles-module__base-node__22lz9",A="_styles-module__productInfo__1bPH1",K=I((function(e){var t=e.editor.links.filter((function(t){return t.source==e.node.id})).map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.target}))[0]}));return o.a.createElement(N.a,null,t.map((function(t){return"productNode"==t.type&&o.a.createElement(g.a,{button:!0,onClick:function(){e.node&&e.node.id&&(console.log(e.node),e.editor.updateNode(e.node.id,(function(e){return e.data.picked=t,e})))}},e.node&&e.node.data&&e.node.data.picked&&e.node.data.picked.id==t.id&&o.a.createElement(k.a,null),t.data.label)})))}));var V=I((function(e){var t=o.a.useState(!1),n=Object(d.a)(t,2);n[0],n[1],console.log(e);var a=(e.editor&&e.editor.nodes||[]).filter((function(t){return t.id==e.id}))[0];return o.a.createElement(W,e,o.a.createElement("div",{className:G},a&&a.data.picked?[o.a.createElement("img",{src:a&&a.data&&a.data.picked.data.img}),o.a.createElement("div",{className:A},o.a.createElement("div",null,a&&a.data&&a.data.picked.data.label),o.a.createElement("div",null,"$",a&&a.data&&a.data.picked.data.price))]:o.a.createElement("div",null,"Awaiting selection")))})),q={__proto__:null,type:"pickerNode",modal:K,node:V},z="_styles-module__base-node__2wC71",X="_styles-module__productInfo__2fXHY",Y=I((function(e){return[o.a.createElement(b.a,{onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.label=t.target.value,e}))},value:e.node.data.label,fullWidth:!0,label:"Product Name"}),o.a.createElement(b.a,{onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.price=t.target.value,e}))},value:e.node.data.price,fullWidth:!0,label:"Product Price"}),o.a.createElement(b.a,{onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.img=t.target.value,e}))},value:e.node.data.img,fullWidth:!0,label:"Product Image"})]}));var Q=I((function(e){var t=o.a.useState(!1),n=Object(d.a)(t,2),a=n[0],r=n[1],l=(e.editor&&e.editor.nodes||[]).filter((function(t){return t.id==e.id}))[0];return o.a.createElement(W,e,o.a.createElement("div",{onClick:function(){return r(!a)},className:z},o.a.createElement("img",{src:l&&l.data&&l.data.img}),o.a.createElement("div",{className:X},o.a.createElement("div",null,l&&l.data&&l.data.label),o.a.createElement("div",null,"$",l&&l.data&&l.data.price))))})),Z={__proto__:null,type:"productNode",modal:Y,node:Q},ee="_styles-module__productInfo__2PMMN",te=I((function(e){var t=e.editor.links.filter((function(t){return t.source==e.node.id})).map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.target}))[0]}));return o.a.createElement(N.a,null,t.map((function(e){return console.log(e),o.a.createElement(g.a,{button:!0,onClick:function(){}},null!=e.data.picked?e.data.picked.data.label:e.data.label,null!=e.data.picked?e.data.picked.data.price:"")})),o.a.createElement(g.a,null,"$",t.map((function(e){return e.data&&e.data.picked?e.data.picked.data.price:0})).concat([0]).reduce((function(e,t){return parseFloat(e)+parseFloat(t)}))))}));var ne=I((function(e){var t=o.a.useState(!1),n=Object(d.a)(t,2),a=(n[0],n[1],(e.editor&&e.editor.nodes||[]).filter((function(t){return t.id==e.id}))[0]);return o.a.createElement(W,e,a&&a.data.picked?[o.a.createElement("img",{src:a&&a.data&&a.data.picked.data.img}),o.a.createElement("div",{className:ee},o.a.createElement("div",null,a&&a.data&&a.data.picked.data.label),o.a.createElement("div",null,"$",a&&a.data&&a.data.picked.data.price))]:o.a.createElement("div",null,"Collecting Info..."))})),ae={__proto__:null,type:"collectorNode",modal:te,node:ne},oe=function(e,t){t=t.slice();for(var n=function(){var n=t[a],o=e.filter((function(e){return e.source==n.id})),r=o.map((function(e){return t.filter((function(t){return t.id==e.target}))[0].data.status||"UNFINISHED"}));r.filter((function(e){return"COMPLETE"!=e})).length>0?(o.map((function(t,n){var a=e.map((function(e){return e.id})).indexOf(t.id);e[a].animated="UNFINISHED"==r[n]})),t[a].data.status="BLOCKED",t[a].style={background:"red"}):0==r.filter((function(e){return"COMPLETE"!=e})).length&&"COMPLETE"!=n.data.status?(o.map((function(t,n){var a=e.map((function(e){return e.id})).indexOf(t.id);e[a].animated="UNFINISHED"==r[n]})),t[a].data.status="UNFINISHED",t[a].style={background:"orange"}):t[a].style={background:"green"},t[a].style=Object(i.a)(Object(i.a)({},t[a].style),{},{borderRadius:7})},a=0;a<t.length;a++)n();return e.slice().concat(t)},re=n(86),le=function(e){console.debug("=> React Flow loaded"),e.fitView()};var de=function(e){var t=o.a.useState(null),n=Object(d.a)(t,2),a=n[0],r=n[1],l=function(t,n){var a=e.nodes.slice(),o=a.map((function(e){return e.id})).indexOf(t);o>-1&&(a[o]=n(a[o]),u(a))},u=function(t){e.onNodeChange&&e.onNodeChange(t)},s=function(t){e.onLinkChange&&e.onLinkChange(t)},m=function(t,n){var a={id:re.v4(),source:t,target:n};return s(e.links.concat([a])),a},f=function(t,n){var a={type:t||"baseNode",id:re.v4(),position:n,data:{label:""}},o=e.nodes.slice();return o.push(a),u(o),a},p=function(e,t){l(t.id,(function(e){return e.position=t.position,e}))},E={nodes:e.nodes,links:e.links,exploring:a,exploreNode:function(t){var n=e.nodes.filter((function(e){return e.id==t}))[0];console.debug("=> Explore Node",n),r(n)},nodeTypes:e.nodeTypes,updateNode:l,joinNode:function(t){e.onJoinNode&&e.onJoinNode((function(e){l(t,(function(t){return t.members||(t.members=[]),t.members&&!t.members.indexOf(e)>-1&&t.members.push(e),t}))}))},addNode:f,addLink:m,addChild:function(t){var n=e.nodes.filter((function(e){return e.id==t}));if(n&&n.length>0){var a={x:n[0].position.x,y:n[0].position.y+100},o=f("baseNode",a);m(t,o.id)}}};return o.a.createElement(S.Provider,{value:E},o.a.createElement(w,null),o.a.createElement(c.e,{elements:oe(e.links,e.nodes),nodeTypes:Object(i.a)({baseNode:U,productNode:Q,pickerNode:V,collectorNode:ne},(e.nodeTypes||[]).map((function(e){return e.node}))),onLoad:le,onNodeDragStart:p,onNodeDragStop:p,onNodeDrag:p,onElementsRemove:function(t){var n=t.filter((function(e){return null==e.source})),a=t.filter((function(e){return null!=e.source}));n=e.nodes.filter((function(e){return n.map((function(e){return e.id})).indexOf(e.id)<0})),a=e.links.filter((function(e){return a.map((function(e){return e.id})).indexOf(e.id)<0})),u(n),s(a)},onConnect:function(e){m(e.source,e.target)},snapToGrid:e.snapToGrid||!0,snapGrid:[15,15]},o.a.createElement(c.d,{nodeStrokeColor:function(e){var t;return null!==(t=e.style)&&void 0!==t&&t.background?e.style.background:"input"===e.type?"#0041d0":"output"===e.type?"#ff0072":"default"===e.type?"#1a192b":"#eee"},nodeColor:function(e){var t;return null!==(t=e.style)&&void 0!==t&&t.background?e.style.background:"#fff"},nodeBorderRadius:2}),o.a.createElement(c.b,null),o.a.createElement(c.a,{color:"#aaa",gap:16})),o.a.createElement(M,{onClose:function(){return r(null)},open:null!=a,selected:a},(function(t){return null!=a&&(e.nodeTypes||[]).concat([$,Z,q,ae]).filter((function(e){return a.type==e.type})).map((function(t){return e.modalBody?e.modalBody(t,a,E):o.a.createElement(t.modal,{node:a})}))[0]})))},ie=(n(85),function(){var e=o.a.useState([]),t=Object(d.a)(e,2),n=t[0],a=t[1],r=o.a.useState([]),l=Object(d.a)(r,2),i=l[0],c=l[1];return o.a.createElement(de,{nodes:n,links:i,modalBody:function(e,t,n){return o.a.createElement("div",{className:"hive-modal"},o.a.createElement(e.modal,{node:t}),o.a.createElement("div",null,o.a.createElement("div",null,"Join")))},onNodeChange:function(e){return a(e)},onLinkChange:function(e){return c(e)}})});l.a.render(o.a.createElement(ie,null),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.400286fa.chunk.js.map